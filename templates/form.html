<!DOCTYPE html>
<html>
<head>
    <title>Customer Churn Predictor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <div class="left-pane">
            <img src="{{ url_for('static', filename='churn_image.jpg') }}" alt="Churn Image">
        </div>
        <div class="right-pane">
            <h1>Customer Churn Prediction</h1>
            <form method="POST" id="predictionForm">

                <div class="three-fields">
                    <div class="field">
                        <label>Customer ID</label>
                        <input type="text" name="customerID" placeholder="Enter Customer ID" value="{{ form_data.get('customerID', '') }}" required>
                    </div>
                    <div class="field">
                        <label>Gender</label>
                        <select name="gender">
                            <option value="" {{ 'selected' if not form_data.get('gender') else '' }}>Select Gender</option>
                            <option value="Male" {{ 'selected' if form_data.get('gender') == 'Male' else '' }}>Male</option>
                            <option value="Female" {{ 'selected' if form_data.get('gender') == 'Female' else '' }}>Female</option>
                        </select>
                    </div>
                    <div class="field">
                        <label for="SeniorCitizen">Senior Citizen:</label>
                        <select name="SeniorCitizen" id="SeniorCitizen" required>
                        <option value="" {{ 'selected' if not form_data.get('SeniorCitizen') else '' }}>Select</option>
                        <option value="Yes" {{ 'selected' if form_data.get('SeniorCitizen') == 'Yes' else '' }}>Yes</option>
                        <option value="No" {{ 'selected' if form_data.get('SeniorCitizen') == 'No' else '' }}>No</option>
                        </select>

                    </div>
                </div>

                <div class="three-fields">
                    <div class="field">
                        <label>Partner</label>
                        <select name="Partner" required>
                            <option value="" {{ 'selected' if not form_data.get('Partner') else '' }}>Select</option>
                            <option value="Yes" {{ 'selected' if form_data.get('Partner') == 'Yes' else '' }}>Yes</option>
                            <option value="No" {{ 'selected' if form_data.get('Partner') == 'No' else '' }}>No</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Dependents</label>
                        <select name="Dependents" required>
                            <option value="" {{ 'selected' if not form_data.get('Dependents') else '' }}>Select</option>
                            <option value="Yes" {{ 'selected' if form_data.get('Dependents') == 'Yes' else '' }}>Yes</option>
                            <option value="No" {{ 'selected' if form_data.get('Dependents') == 'No' else '' }}>No</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Tenure</label>
                        <input type="number" name="tenure" placeholder="Enter Tenure" value="{{ form_data.get('tenure', '') }}" required>
                    </div>
                </div>

                <div class="three-fields">
                    <div class="field">
                        <label>Phone Service</label>
                        <select name="PhoneService" required>
                            <option value="" {{ 'selected' if not form_data.get('PhoneService') else '' }}>Select</option>
                            <option value="Yes" {{ 'selected' if form_data.get('PhoneService') == 'Yes' else '' }}>Yes</option>
                            <option value="No" {{ 'selected' if form_data.get('PhoneService') == 'No' else '' }}>No</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Multiple Lines</label>
                        <select name="MultipleLines">
                            <option value="" {{ 'selected' if not form_data.get('MultipleLines') else '' }}>Select</option>
                            <option value="Yes" {{ 'selected' if form_data.get('MultipleLines') == 'Yes' else '' }}>Yes</option>
                            <option value="No" {{ 'selected' if form_data.get('MultipleLines') == 'No' else '' }}>No</option>
                            <option value="No phone service" {{ 'selected' if form_data.get('MultipleLines') == 'No phone service' else '' }}>No phone service</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Internet Service</label>
                        <select name="InternetService">
                            <option value="" {{ 'selected' if not form_data.get('InternetService') else '' }}>Select</option>
                            <option value="DSL" {{ 'selected' if form_data.get('InternetService') == 'DSL' else '' }}>DSL</option>
                            <option value="Fiber optic" {{ 'selected' if form_data.get('InternetService') == 'Fiber optic' else '' }}>Fiber optic</option>
                            <option value="No" {{ 'selected' if form_data.get('InternetService') == 'No' else '' }}>No</option>
                        </select>
                    </div>
                </div>

                <div class="three-fields">
                    <div class="field">
                        <label>Online Security</label>
                        <select name="OnlineSecurity">
                            <option value="" {{ 'selected' if not form_data.get('OnlineSecurity') else '' }}>Select</option>
                            <option value="Yes" {{ 'selected' if form_data.get('OnlineSecurity') == 'Yes' else '' }}>Yes</option>
                            <option value="No" {{ 'selected' if form_data.get('OnlineSecurity') == 'No' else '' }}>No</option>
                            <option value="No internet service" {{ 'selected' if form_data.get('OnlineSecurity') == 'No internet service' else '' }}>No internet service</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Online Backup</label>
                        <select name="OnlineBackup">
                            <option value="" {{ 'selected' if not form_data.get('OnlineBackup') else '' }}>Select</option>
                            <option value="Yes" {{ 'selected' if form_data.get('OnlineBackup') == 'Yes' else '' }}>Yes</option>
                            <option value="No" {{ 'selected' if form_data.get('OnlineBackup') == 'No' else '' }}>No</option>
                            <option value="No internet service" {{ 'selected' if form_data.get('OnlineBackup') == 'No internet service' else '' }}>No internet service</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Device Protection</label>
                        <select name="DeviceProtection">
                            <option value="" {{ 'selected' if not form_data.get('DeviceProtection') else '' }}>Select</option>
                            <option value="Yes" {{ 'selected' if form_data.get('DeviceProtection') == 'Yes' else '' }}>Yes</option>
                            <option value="No" {{ 'selected' if form_data.get('DeviceProtection') == 'No' else '' }}>No</option>
                            <option value="No internet service" {{ 'selected' if form_data.get('DeviceProtection') == 'No internet service' else '' }}>No internet service</option>
                        </select>
                    </div>
                </div>

                <div class="three-fields">
                    <div class="field">
                        <label>Tech Support</label>
                        <select name="TechSupport">
                            <option value="" {{ 'selected' if not form_data.get('TechSupport') else '' }}>Select</option>
                            <option value="Yes" {{ 'selected' if form_data.get('TechSupport') == 'Yes' else '' }}>Yes</option>
                            <option value="No" {{ 'selected' if form_data.get('TechSupport') == 'No' else '' }}>No</option>
                            <option value="No internet service" {{ 'selected' if form_data.get('TechSupport') == 'No internet service' else '' }}>No internet service</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Streaming TV</label>
                        <select name="StreamingTV">
                            <option value="" {{ 'selected' if not form_data.get('StreamingTV') else '' }}>Select</option>
                            <option value="Yes" {{ 'selected' if form_data.get('StreamingTV') == 'Yes' else '' }}>Yes</option>
                            <option value="No" {{ 'selected' if form_data.get('StreamingTV') == 'No' else '' }}>No</option>
                            <option value="No internet service" {{ 'selected' if form_data.get('StreamingTV') == 'No internet service' else '' }}>No internet service</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Streaming Movies</label>
                        <select name="StreamingMovies">
                            <option value="" {{ 'selected' if not form_data.get('StreamingMovies') else '' }}>Select</option>
                            <option value="Yes" {{ 'selected' if form_data.get('StreamingMovies') == 'Yes' else '' }}>Yes</option>
                            <option value="No" {{ 'selected' if form_data.get('StreamingMovies') == 'No' else '' }}>No</option>
                            <option value="No internet service" {{ 'selected' if form_data.get('StreamingMovies') == 'No internet service' else '' }}>No internet service</option>
                        </select>
                    </div>
                </div>

                <div class="three-fields">
                    <div class="field">
                        <label>Contract</label>
                        <select name="Contract" required>
                            <option value="" {{ 'selected' if not form_data.get('Contract') else '' }}>Select</option>
                            <option value="Month-to-month" {{ 'selected' if form_data.get('Contract') == 'Month-to-month' else '' }}>Month-to-month</option>
                            <option value="One year" {{ 'selected' if form_data.get('Contract') == 'One year' else '' }}>One year</option>
                            <option value="Two year" {{ 'selected' if form_data.get('Contract') == 'Two year' else '' }}>Two year</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Paperless Billing</label>
                        <select name="PaperlessBilling" required>
                            <option value="" {{ 'selected' if not form_data.get('PaperlessBilling') else '' }}>Select</option>
                            <option value="Yes" {{ 'selected' if form_data.get('PaperlessBilling') == 'Yes' else '' }}>Yes</option>
                            <option value="No" {{ 'selected' if form_data.get('PaperlessBilling') == 'No' else '' }}>No</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Payment Method</label>
                        <select name="PaymentMethod" required>
                            <option value="" {{ 'selected' if not form_data.get('PaymentMethod') else '' }}>Select</option>
                            <option value="Electronic check" {{ 'selected' if form_data.get('PaymentMethod') == 'Electronic check' else '' }}>Electronic check</option>
                            <option value="Mailed check" {{ 'selected' if form_data.get('PaymentMethod') == 'Mailed check' else '' }}>Mailed check</option>
                            <option value="Bank transfer (automatic)" {{ 'selected' if form_data.get('PaymentMethod') == 'Bank transfer (automatic)' else '' }}>Bank transfer (automatic)</option>
                            <option value="Credit card (automatic)" {{ 'selected' if form_data.get('PaymentMethod') == 'Credit card (automatic)' else '' }}>Credit card (automatic)</option>
                        </select>
                    </div>
                </div>

                <div class="three-fields">
                    <div class="field">
                        <label>Monthly Charges</label>
                        <input type="number" step="0.01" name="MonthlyCharges" placeholder="Enter Amount" value="{{ form_data.get('MonthlyCharges', '') }}" required>
                    </div>
                    <div class="field">
                        <label>Total Charges</label>
                        <input type="number" step="0.01" name="TotalCharges" placeholder="Enter Amount" value="{{ form_data.get('TotalCharges', '') }}" required>
                    </div>
                </div>

                <div class="button-container">
                    <button type="submit">Predict</button>
                    <button type="button" onclick="clearForm()">Clear</button>
                </div>
            </form>

         {% if prediction and risk_class %}
<div class="prediction-box {{ risk_class }}">
    <p class="prediction-text">{{ prediction|safe }}</p>
</div>
{% endif %}





        </div>
    </div>

       <script>
        function clearForm() {
            // Reset form
            document.getElementById('predictionForm').reset();

            // Manually clear text and number inputs
            const inputs = document.querySelectorAll('input[type="text"], input[type="number"]');
            inputs.forEach(input => {
                input.value = '';
            });

            // Reset all select fields
            const selects = document.querySelectorAll('select');
            selects.forEach(select => {
                select.selectedIndex = 0;
            });

            // Hide the prediction box
            const predictionBox = document.querySelector('.prediction-box');
            if (predictionBox) {
                predictionBox.style.display = 'none';
            }
        }
    </script>
</body>
</html>
